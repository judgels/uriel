@import b3.inline.fieldConstructor
@import org.iatoki.judgels.uriel.contest.module.ContestModules
@import org.iatoki.judgels.uriel.contest.module.duration.ContestDurationModule
@import org.iatoki.judgels.uriel.contest.password.ContestEnterWithPasswordForm
@import org.iatoki.judgels.uriel.contest.Contest
@import play.i18n.Messages
@import org.iatoki.judgels.uriel.contest.routes
@import org.iatoki.judgels.play.JudgelsPlayUtils
@(contest: Contest, passwordForm: Form[ContestEnterWithPasswordForm])

<div class="well">
    @Html(contest.getDescription)
    <hr />
    @if(contest.containsModule(ContestModules.DURATION)) {
        <p>
            <small><time class="display-time" datetime="@JudgelsPlayUtils.formatISOUTCDateTime(contest.getModule(ContestModules.DURATION).asInstanceOf[ContestDurationModule].getBeginTime.getTime)">@JudgelsPlayUtils.formatDetailedDateTime(contest.getModule(ContestModules.DURATION).asInstanceOf[ContestDurationModule].getBeginTime.getTime)</time>
                - <time class="display-time" datetime="@JudgelsPlayUtils.formatISOUTCDateTime(contest.getModule(ContestModules.DURATION).asInstanceOf[ContestDurationModule].getEndTime.getTime)">@JudgelsPlayUtils.formatDetailedDateTime(contest.getModule(ContestModules.DURATION).asInstanceOf[ContestDurationModule].getEndTime.getTime)</time></small>
        </p>
    }

    @if(play.mvc.Controller.flash("password") != null) {
        <div class="alert alert-danger" role="alert">@{play.mvc.Controller.flash("password")}</div>
    }

    @b3.form(routes.ContestController.enterContestWithPassword(contest.getId)) {
        @b3.password(passwordForm("password"), '_label -> "Password")
        @b3.submit('class -> "btn btn-primary") { @Messages.get("contest.enter") }
    }
</div>
