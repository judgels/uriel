@(contestId: Long, page: org.iatoki.judgels.commons.Page[org.iatoki.judgels.uriel.ContestProblem], pageIndex: Long, orderBy: String, orderDir: String, filterString: String)

@import play.i18n.Messages
@import org.iatoki.judgels.uriel.JidCacheService
@import org.iatoki.judgels.uriel.controllers.routes
@import scala.collection.JavaConversions
@import org.iatoki.judgels.commons.views.html.table.paginationView
@import org.iatoki.judgels.uriel.views.html.contest.contestant.contestantjs

@listFunc(newPageIndex: scala.Long, newOrderBy: String, newOrderDir: String, newFilterString: String) = @{routes.ContestController.listContestantProblems(contestId, newPageIndex, newOrderBy, newOrderDir, newFilterString)}

@defining(JidCacheService.getInstance().getDisplayNames(JavaConversions.seqAsJavaList(page.getData.map(s => s.getProblemJid).toSeq))) { displayNamesMap =>
    @for(contestProblem <- page.getData) {
        <div class="panel panel-default">
            <div class="panel-body">
                <a href="@routes.ContestController.viewContestantProblem(contestId, contestProblem.getId)">
                    @contestProblem.getAlias
                    - @displayNamesMap.get(contestProblem.getProblemJid)
                </a>
                @if(contestProblem.getSubmissionsLimit != 0) {
                    <div class="pull-right">@Messages.get("submission.left") : @(contestProblem.getSubmissionsLeft)</div>
                }
                <div class="clearfix"></div>
            </div>
        </div>
    }
}

@paginationView(page, orderBy, orderDir, filterString, listFunc)

@contestantjs(contestId)